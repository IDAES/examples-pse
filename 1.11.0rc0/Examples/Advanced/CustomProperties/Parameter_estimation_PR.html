

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Using parameter estimation with generic property package &mdash; IDAES v1.11.0rc0 Examples</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
<!-- Add Google fonts -->
<link href="https://fonts.googleapis.com/css?family=Arimo|Roboto&display=swap"
      rel="stylesheet">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> IDAES Examples
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Tutorials/index.html">IDAES Tutorials</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">IDAES Examples</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Using parameter estimation with generic property package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/Examples/Advanced/CustomProperties/Parameter_estimation_PR.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-parameter-estimation-with-generic-property-package">
<h1>Using parameter estimation with generic property package<a class="headerlink" href="#using-parameter-estimation-with-generic-property-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This Jupyter Notebook estimates binary interaction parameters for a
CO<span class="math notranslate nohighlight">\(_2\)</span>-Ionic liquid property package. A property package has
been created for CO<span class="math notranslate nohighlight">\(_2\)</span>-[bmim][PF6]. We will utilize Pyomo’s
<code class="docutils literal notranslate"><span class="pre">parmest</span></code> tool in conjuction with IDAES models for parameter
estimation. We demonstrate these tools by estimating the parameters
associated with the Peng-Robinson property model for a benzene-toluene
mixture. The Peng-Robinson EOS the binary interaction parameter
(kappa_ij). When estimating parameters associated with the property
package, IDAES provides the flexibility of doing the parameter
estimation by just using the state block or by using a unit model with a
specified property package. This module will demonstrate parameter
estimation by using the flash unit model with the generic property
package.</p>
<div class="section" id="tutorial-objectives">
<h3>1.1 Tutorial objectives<a class="headerlink" href="#tutorial-objectives" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Utilize the Generic Property Package, which provides a flexible
platform for users to build property packages by calling upon
libraries of modular sub-models to build up complex property
calculations with the least effort possible.</p></li>
<li><p>Set up a method to return an initialized model</p></li>
<li><p>Set up the parameter estimation problem using <code class="docutils literal notranslate"><span class="pre">parmest</span></code></p></li>
</ul>
</div>
</div>
<div class="section" id="problem-statement">
<h2>2. Problem Statement<a class="headerlink" href="#problem-statement" title="Permalink to this headline">¶</a></h2>
<div class="section" id="importing-pyomo-and-idaes-model-and-flowsheet-components">
<h3>2.1 Importing Pyomo and IDAES model and flowsheet components.<a class="headerlink" href="#importing-pyomo-and-idaes-model-and-flowsheet-components" title="Permalink to this headline">¶</a></h3>
<p>In the next cell, we will be importing the necessary components from
Pyomo and IDAES.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import objects from pyomo package</span>
<span class="kn">from</span> <span class="nn">pyomo.environ</span> <span class="kn">import</span> <span class="p">(</span><span class="n">ConcreteModel</span><span class="p">,</span>
                           <span class="n">SolverFactory</span><span class="p">,</span>
                           <span class="n">units</span> <span class="k">as</span> <span class="n">pyunits</span><span class="p">)</span>

<span class="c1"># Import the main FlowsheetBlock from IDAES. The flowsheet block will contain the unit model</span>
<span class="kn">from</span> <span class="nn">idaes.core</span> <span class="kn">import</span> <span class="n">FlowsheetBlock</span>

<span class="c1"># Import idaes logger to set output levels</span>
<span class="kn">import</span> <span class="nn">idaes.logger</span> <span class="k">as</span> <span class="nn">idaeslog</span>

<span class="c1"># Import Flash unit model from idaes.generic_models.unit_models</span>
<span class="kn">from</span> <span class="nn">idaes.generic_models.unit_models</span> <span class="kn">import</span> <span class="n">Flash</span>
</pre></div>
</div>
</div>
<div class="section" id="import-parmest">
<h3>2.2 Import parmest<a class="headerlink" href="#import-parmest" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pyomo.contrib.parmest.parmest</span> <span class="k">as</span> <span class="nn">parmest</span>
</pre></div>
</div>
</div>
<div class="section" id="import-the-generic-parameter-block">
<h3>2.3 Import the generic parameter block<a class="headerlink" href="#import-the-generic-parameter-block" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">idaes.generic_models.properties.core.examples.CO2_bmimPF6_PR</span> <span class="kn">import</span> <span class="n">configuration</span>

<span class="kn">from</span> <span class="nn">idaes.generic_models.properties.core.generic.generic_property</span> <span class="kn">import</span> <span class="n">GenericParameterBlock</span>
</pre></div>
</div>
</div>
<div class="section" id="import-data">
<h3>2.4 Import data<a class="headerlink" href="#import-data" title="Permalink to this headline">¶</a></h3>
<p>In the next cell, we will be importing <code class="docutils literal notranslate"><span class="pre">pandas</span></code> and the <code class="docutils literal notranslate"><span class="pre">.csv</span></code> file
with preassure and composition data. For this example, we load data from
the csv file CO2_IL_298.csv. The dataset consists of ninteen data points
which provide the mole fraction of [bmim][PF6] and carbon dioxide and
the pressure at three different temperatures.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># Load data from csv</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;CO2_IL_298.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="setting-up-an-initialized-model">
<h2>3.0 Setting up an initialized model<a class="headerlink" href="#setting-up-an-initialized-model" title="Permalink to this headline">¶</a></h2>
<p>We need to provide a method that returns an initialized model to the
<code class="docutils literal notranslate"><span class="pre">parmest</span></code> tool in Pyomo.</p>
<p>How we build the model will depend on the data we provided in the data
dataframe from pir .csv file.</p>
<p>In this case we have data on the liquid mixture, the temperature and the
pressure. We will fix the temperature, mole franction in the liquid
phase, and the mole fraction of the inlet.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">PR_model</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>

    <span class="n">m</span> <span class="o">=</span> <span class="n">ConcreteModel</span><span class="p">()</span>

    <span class="n">m</span><span class="o">.</span><span class="n">fs</span> <span class="o">=</span> <span class="n">FlowsheetBlock</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;dynamic&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">})</span>

    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">properties</span> <span class="o">=</span> <span class="n">GenericParameterBlock</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">configuration</span><span class="p">)</span>

    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">build_state_block</span><span class="p">([</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;defined_state&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>

    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">flow_mol</span><span class="o">.</span><span class="n">fix</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;x_carbon_dioxide&quot;</span><span class="p">])</span><span class="o">+</span><span class="mf">0.5</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">fix</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;temperature&quot;</span><span class="p">]))</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">pressure</span><span class="o">.</span><span class="n">fix</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;pressure&quot;</span><span class="p">]))</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">mole_frac_comp</span><span class="p">[</span><span class="s2">&quot;bmimPF6&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">fix</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">x</span><span class="p">)</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">mole_frac_comp</span><span class="p">[</span><span class="s2">&quot;carbon_dioxide&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">fix</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="c1"># parameter - kappa_ij (set at 0.3, 0 if i=j)</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">PR_kappa</span><span class="p">[</span><span class="s1">&#39;bmimPF6&#39;</span><span class="p">,</span> <span class="s1">&#39;bmimPF6&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fix</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">PR_kappa</span><span class="p">[</span><span class="s1">&#39;bmimPF6&#39;</span><span class="p">,</span> <span class="s1">&#39;carbon_dioxide&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fix</span><span class="p">(</span><span class="o">-</span><span class="mf">0.047</span><span class="p">)</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">PR_kappa</span><span class="p">[</span><span class="s1">&#39;carbon_dioxide&#39;</span><span class="p">,</span> <span class="s1">&#39;carbon_dioxide&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fix</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">PR_kappa</span><span class="p">[</span><span class="s1">&#39;carbon_dioxide&#39;</span><span class="p">,</span> <span class="s1">&#39;bmimPF6&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fix</span><span class="p">(</span><span class="mf">0.002</span><span class="p">)</span>

    <span class="c1"># Initialize the flash unit</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">outlvl</span><span class="o">=</span><span class="n">idaeslog</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

    <span class="c1"># Fix the state variables on the state block</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">pressure</span><span class="o">.</span><span class="n">unfix</span><span class="p">()</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">fix</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;temperature&quot;</span><span class="p">]))</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">mole_frac_phase_comp</span><span class="p">[</span><span class="s1">&#39;Liq&#39;</span><span class="p">,</span> <span class="s1">&#39;bmimPF6&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fix</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;x_bmimPF6&quot;</span><span class="p">]))</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">mole_frac_phase_comp</span><span class="p">[</span><span class="s1">&#39;Liq&#39;</span><span class="p">,</span> <span class="s1">&#39;carbon_dioxide&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fix</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;x_carbon_dioxide&quot;</span><span class="p">]))</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">mole_frac_comp</span><span class="p">[</span><span class="s1">&#39;bmimPF6&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fix</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;x_bmimPF6&quot;</span><span class="p">]))</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">mole_frac_comp</span><span class="p">[</span><span class="s1">&#39;carbon_dioxide&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unfix</span><span class="p">()</span>
    <span class="c1"># Set bounds on variables to be estimated</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">PR_kappa</span><span class="p">[</span><span class="s1">&#39;bmimPF6&#39;</span><span class="p">,</span> <span class="s1">&#39;carbon_dioxide&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setlb</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">PR_kappa</span><span class="p">[</span><span class="s1">&#39;bmimPF6&#39;</span><span class="p">,</span> <span class="s1">&#39;carbon_dioxide&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setub</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">PR_kappa</span><span class="p">[</span><span class="s1">&#39;carbon_dioxide&#39;</span><span class="p">,</span> <span class="s1">&#39;bmimPF6&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setlb</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">PR_kappa</span><span class="p">[</span><span class="s1">&#39;carbon_dioxide&#39;</span><span class="p">,</span> <span class="s1">&#39;bmimPF6&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">setub</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

    <span class="c1"># Return initialized flash model</span>
    <span class="k">return</span> <span class="n">m</span>
</pre></div>
</div>
<div class="section" id="solving-square-problem">
<h3>3.1 Solving square problem<a class="headerlink" href="#solving-square-problem" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">idaes.core.util.model_statistics</span> <span class="kn">import</span> <span class="n">degrees_of_freedom</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="n">test_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="mi">298</span><span class="p">,</span> <span class="s2">&quot;pressure&quot;</span><span class="p">:</span> <span class="mi">812323</span><span class="p">,</span> <span class="s2">&quot;x_bmimPF6&quot;</span><span class="p">:</span><span class="mf">0.86</span><span class="p">,</span> <span class="s2">&quot;x_carbon_dioxide&quot;</span><span class="p">:</span><span class="mf">0.14</span><span class="p">}</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">PR_model</span><span class="p">(</span><span class="n">test_data</span><span class="p">)</span>

<span class="c1"># Check that degrees of freedom is 0</span>
<span class="k">assert</span> <span class="n">degrees_of_freedom</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WARNING</span><span class="p">:</span> <span class="n">DEPRECATED</span><span class="p">:</span> <span class="n">Using</span> <span class="fm">__getitem__</span> <span class="n">to</span> <span class="k">return</span> <span class="n">a</span> <span class="nb">set</span> <span class="n">value</span> <span class="kn">from</span> <span class="nn">its</span>
    <span class="p">(</span><span class="n">ordered</span><span class="p">)</span> <span class="n">position</span> <span class="ow">is</span> <span class="n">deprecated</span><span class="o">.</span>  <span class="n">Please</span> <span class="n">use</span> <span class="n">at</span><span class="p">()</span>  <span class="p">(</span><span class="n">deprecated</span> <span class="ow">in</span> <span class="mf">6.1</span><span class="p">,</span>
    <span class="n">will</span> <span class="n">be</span> <span class="n">removed</span> <span class="ow">in</span> <span class="mf">7.0</span><span class="p">)</span> <span class="p">(</span><span class="n">called</span> <span class="kn">from</span>
    <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">lbianchi</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">conda</span><span class="o">/</span><span class="n">envs</span><span class="o">/</span><span class="n">examples</span><span class="o">-</span><span class="n">pse</span><span class="o">-</span><span class="mf">1.11.0</span><span class="n">rc0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="mf">.8</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">pa</span>
    <span class="n">ckages</span><span class="o">/</span><span class="n">idaes</span><span class="o">/</span><span class="n">generic_models</span><span class="o">/</span><span class="n">properties</span><span class="o">/</span><span class="n">core</span><span class="o">/</span><span class="n">state_definitions</span><span class="o">/</span><span class="n">FTPx</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">178</span><span class="p">)</span>
<span class="n">WARNING</span><span class="p">:</span> <span class="n">DEPRECATED</span><span class="p">:</span> <span class="n">Using</span> <span class="fm">__getitem__</span> <span class="n">to</span> <span class="k">return</span> <span class="n">a</span> <span class="nb">set</span> <span class="n">value</span> <span class="kn">from</span> <span class="nn">its</span>
    <span class="p">(</span><span class="n">ordered</span><span class="p">)</span> <span class="n">position</span> <span class="ow">is</span> <span class="n">deprecated</span><span class="o">.</span>  <span class="n">Please</span> <span class="n">use</span> <span class="n">at</span><span class="p">()</span>  <span class="p">(</span><span class="n">deprecated</span> <span class="ow">in</span> <span class="mf">6.1</span><span class="p">,</span>
    <span class="n">will</span> <span class="n">be</span> <span class="n">removed</span> <span class="ow">in</span> <span class="mf">7.0</span><span class="p">)</span> <span class="p">(</span><span class="n">called</span> <span class="kn">from</span>
    <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">lbianchi</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">conda</span><span class="o">/</span><span class="n">envs</span><span class="o">/</span><span class="n">examples</span><span class="o">-</span><span class="n">pse</span><span class="o">-</span><span class="mf">1.11.0</span><span class="n">rc0</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="mf">.8</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">pa</span>
    <span class="n">ckages</span><span class="o">/</span><span class="n">idaes</span><span class="o">/</span><span class="n">generic_models</span><span class="o">/</span><span class="n">properties</span><span class="o">/</span><span class="n">core</span><span class="o">/</span><span class="n">state_definitions</span><span class="o">/</span><span class="n">FTPx</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">176</span><span class="p">)</span>
<span class="mi">2021</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span> <span class="mi">20</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">44</span> <span class="p">[</span><span class="n">INFO</span><span class="p">]</span> <span class="n">idaes</span><span class="o">.</span><span class="n">init</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="p">:</span> <span class="n">Starting</span> <span class="n">initialization</span>
<span class="mi">2021</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span> <span class="mi">20</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">44</span> <span class="p">[</span><span class="n">INFO</span><span class="p">]</span> <span class="n">idaes</span><span class="o">.</span><span class="n">init</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="p">:</span> <span class="n">Dew</span> <span class="ow">and</span> <span class="n">bubble</span> <span class="n">point</span> <span class="n">initialization</span><span class="p">:</span> <span class="n">optimal</span> <span class="o">-</span> <span class="n">Optimal</span> <span class="n">Solution</span> <span class="n">Found</span><span class="o">.</span>
<span class="mi">2021</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span> <span class="mi">20</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">44</span> <span class="p">[</span><span class="n">INFO</span><span class="p">]</span> <span class="n">idaes</span><span class="o">.</span><span class="n">init</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="p">:</span> <span class="n">Equilibrium</span> <span class="n">temperature</span> <span class="n">initialization</span> <span class="n">completed</span><span class="o">.</span>
<span class="mi">2021</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span> <span class="mi">20</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">44</span> <span class="p">[</span><span class="n">INFO</span><span class="p">]</span> <span class="n">idaes</span><span class="o">.</span><span class="n">init</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="p">:</span> <span class="n">State</span> <span class="n">variable</span> <span class="n">initialization</span> <span class="n">completed</span><span class="o">.</span>
<span class="mi">2021</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span> <span class="mi">20</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">44</span> <span class="p">[</span><span class="n">INFO</span><span class="p">]</span> <span class="n">idaes</span><span class="o">.</span><span class="n">init</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="p">:</span> <span class="n">Phase</span> <span class="n">equilibrium</span> <span class="n">initialization</span><span class="p">:</span> <span class="n">optimal</span> <span class="o">-</span> <span class="n">Optimal</span> <span class="n">Solution</span> <span class="n">Found</span><span class="o">.</span>
<span class="mi">2021</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span> <span class="mi">20</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">44</span> <span class="p">[</span><span class="n">INFO</span><span class="p">]</span> <span class="n">idaes</span><span class="o">.</span><span class="n">init</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="p">:</span> <span class="n">Property</span> <span class="n">initialization</span><span class="p">:</span> <span class="n">optimal</span> <span class="o">-</span> <span class="n">Optimal</span> <span class="n">Solution</span> <span class="n">Found</span><span class="o">.</span>
<span class="mi">2021</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span> <span class="mi">20</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">44</span> <span class="p">[</span><span class="n">INFO</span><span class="p">]</span> <span class="n">idaes</span><span class="o">.</span><span class="n">init</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="p">:</span> <span class="n">Property</span> <span class="n">package</span> <span class="n">initialization</span><span class="p">:</span> <span class="n">optimal</span> <span class="o">-</span> <span class="n">Optimal</span> <span class="n">Solution</span> <span class="n">Found</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="parameter-estimation-using-parmest">
<h2>4.0 Parameter estimation using parmest<a class="headerlink" href="#parameter-estimation-using-parmest" title="Permalink to this headline">¶</a></h2>
<div class="section" id="list-of-variable-names-to-be-estimated">
<h3>4.1 List of variable names to be estimated<a class="headerlink" href="#list-of-variable-names-to-be-estimated" title="Permalink to this headline">¶</a></h3>
<p>Create a list of vars to estimate</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">variable_name</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;fs.properties.PR_kappa[&#39;bmimPF6&#39;, &#39;carbon_dioxide&#39;]&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;fs.properties.PR_kappa[&#39;carbon_dioxide&#39;, &#39;bmimPF6&#39;]&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="create-method-to-return-an-expression-that-computes-the-sum-of-squared-error">
<h3>4.2 Create method to return an expression that computes the sum of squared error<a class="headerlink" href="#create-method-to-return-an-expression-that-computes-the-sum-of-squared-error" title="Permalink to this headline">¶</a></h3>
<p>We need to provide a method to return an expression to compute the sum
of squared errors that will be used as the objective in solving the
parameter estimation problem. For this problem, the error will be
computed for the pressure.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">SSE</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="p">((</span><span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;pressure&quot;</span><span class="p">])</span> <span class="o">-</span> <span class="n">m</span><span class="o">.</span><span class="n">fs</span><span class="o">.</span><span class="n">state_block</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">pressure</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">expr</span><span class="o">*</span><span class="mf">1e-7</span>
</pre></div>
</div>
</div>
<div class="section" id="run-the-parameter-estimation">
<h3>4.3 Run the parameter estimation<a class="headerlink" href="#run-the-parameter-estimation" title="Permalink to this headline">¶</a></h3>
<p>We are now ready to set up the parameter estimation problem. We will
create a parameter estimation object called pest. As shown below, we
pass the method that returns an initialized model, data, variable_name,
and the SSE expression to the Estimator method. tee=True will print the
solver output after solving the parameter estimation problem.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pest</span> <span class="o">=</span> <span class="n">parmest</span><span class="o">.</span><span class="n">Estimator</span><span class="p">(</span><span class="n">PR_model</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">,</span> <span class="n">SSE</span><span class="p">,</span> <span class="n">tee</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">obj_value</span><span class="p">,</span> <span class="n">parameters</span> <span class="o">=</span> <span class="n">pest</span><span class="o">.</span><span class="n">theta_est</span><span class="p">()</span>
</pre></div>
</div>
<pre class="literal-block">2021-08-25 20:03:44 [INFO] idaes.init.fs.state_block: Starting initialization
2021-08-25 20:03:44 [INFO] idaes.init.fs.state_block: Dew and bubble point initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:44 [INFO] idaes.init.fs.state_block: Equilibrium temperature initialization completed.
2021-08-25 20:03:44 [INFO] idaes.init.fs.state_block: State variable initialization completed.
2021-08-25 20:03:44 [INFO] idaes.init.fs.state_block: Phase equilibrium initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Property initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Property package initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Starting initialization
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Dew and bubble point initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Equilibrium temperature initialization completed.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: State variable initialization completed.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Phase equilibrium initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Property initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Property package initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Starting initialization
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Dew and bubble point initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Equilibrium temperature initialization completed.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: State variable initialization completed.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Phase equilibrium initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Property initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Property package initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Starting initialization
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Dew and bubble point initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Equilibrium temperature initialization completed.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: State variable initialization completed.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Phase equilibrium initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Property initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Property package initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Starting initialization
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Dew and bubble point initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Equilibrium temperature initialization completed.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: State variable initialization completed.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Phase equilibrium initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Property initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Property package initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Starting initialization
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Dew and bubble point initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Equilibrium temperature initialization completed.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: State variable initialization completed.
2021-08-25 20:03:45 [INFO] idaes.init.fs.state_block: Phase equilibrium initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Property initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Property package initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Starting initialization
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Dew and bubble point initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Equilibrium temperature initialization completed.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: State variable initialization completed.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Phase equilibrium initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Property initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Property package initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Starting initialization
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Dew and bubble point initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Equilibrium temperature initialization completed.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: State variable initialization completed.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Phase equilibrium initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Property initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Property package initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Starting initialization
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Dew and bubble point initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Equilibrium temperature initialization completed.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: State variable initialization completed.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Phase equilibrium initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Property initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Property package initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Starting initialization
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Dew and bubble point initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Equilibrium temperature initialization completed.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: State variable initialization completed.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Phase equilibrium initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Property initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Property package initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Starting initialization
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Dew and bubble point initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Equilibrium temperature initialization completed.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: State variable initialization completed.
2021-08-25 20:03:46 [INFO] idaes.init.fs.state_block: Phase equilibrium initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Property initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Property package initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Starting initialization
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Dew and bubble point initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Equilibrium temperature initialization completed.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: State variable initialization completed.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Phase equilibrium initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Property initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Property package initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Starting initialization
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Dew and bubble point initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Equilibrium temperature initialization completed.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: State variable initialization completed.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Phase equilibrium initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Property initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Property package initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Starting initialization
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Dew and bubble point initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Equilibrium temperature initialization completed.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: State variable initialization completed.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Phase equilibrium initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Property initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Property package initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Starting initialization
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Dew and bubble point initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Equilibrium temperature initialization completed.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: State variable initialization completed.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Phase equilibrium initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Property initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Property package initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Starting initialization
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Dew and bubble point initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: Equilibrium temperature initialization completed.
2021-08-25 20:03:47 [INFO] idaes.init.fs.state_block: State variable initialization completed.
2021-08-25 20:03:48 [INFO] idaes.init.fs.state_block: Phase equilibrium initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:48 [INFO] idaes.init.fs.state_block: Property initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:48 [INFO] idaes.init.fs.state_block: Property package initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:48 [INFO] idaes.init.fs.state_block: Starting initialization
2021-08-25 20:03:48 [INFO] idaes.init.fs.state_block: Dew and bubble point initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:48 [INFO] idaes.init.fs.state_block: Equilibrium temperature initialization completed.
2021-08-25 20:03:48 [INFO] idaes.init.fs.state_block: State variable initialization completed.
2021-08-25 20:03:48 [INFO] idaes.init.fs.state_block: Phase equilibrium initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:48 [INFO] idaes.init.fs.state_block: Property initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:48 [INFO] idaes.init.fs.state_block: Property package initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:48 [INFO] idaes.init.fs.state_block: Starting initialization
2021-08-25 20:03:48 [INFO] idaes.init.fs.state_block: Dew and bubble point initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:48 [INFO] idaes.init.fs.state_block: Equilibrium temperature initialization completed.
2021-08-25 20:03:48 [INFO] idaes.init.fs.state_block: State variable initialization completed.
2021-08-25 20:03:48 [INFO] idaes.init.fs.state_block: Phase equilibrium initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:48 [INFO] idaes.init.fs.state_block: Property initialization: optimal - Optimal Solution Found.
2021-08-25 20:03:48 [INFO] idaes.init.fs.state_block: Property package initialization: optimal - Optimal Solution Found.
Ipopt 3.13.2:

<strong>**************************************************************************</strong>
This program contains Ipopt, a library for large-scale nonlinear optimization.
 Ipopt is released as open source code under the Eclipse Public License (EPL).
         For more information visit <a class="reference external" href="http://projects.coin-or.org/Ipopt">http://projects.coin-or.org/Ipopt</a>

This version of Ipopt was compiled from source code available at
    <a class="reference external" href="https://github.com/IDAES/Ipopt">https://github.com/IDAES/Ipopt</a> as part of the Institute for the Design of
    Advanced Energy Systems Process Systems Engineering Framework (IDAES PSE
    Framework) Copyright (c) 2018-2019. See <a class="reference external" href="https://github.com/IDAES/idaes-pse">https://github.com/IDAES/idaes-pse</a>.

This version of Ipopt was compiled using HSL, a collection of Fortran codes
    for large-scale scientific computation.  All technical papers, sales and
    publicity material resulting from use of the HSL codes within IPOPT must
    contain the following acknowledgement:
        HSL, a collection of Fortran codes for large-scale scientific
        computation. See <a class="reference external" href="http://www.hsl.rl.ac.uk">http://www.hsl.rl.ac.uk</a>.
<strong>**************************************************************************</strong>

This is Ipopt version 3.13.2, running with linear solver ma27.

Number of nonzeros in equality constraint Jacobian...:      608
Number of nonzeros in inequality constraint Jacobian.:        0
Number of nonzeros in Lagrangian Hessian.............:      612

Total number of variables............................:      252
                     variables with only lower bounds:      108
                variables with lower and upper bounds:      108
                     variables with only upper bounds:        0
Total number of equality constraints.................:      250
Total number of inequality constraints...............:        0
        inequality constraints with only lower bounds:        0
   inequality constraints with lower and upper bounds:        0
        inequality constraints with only upper bounds:        0

iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
   0  0.0000000e+00 4.98e-01 4.66e-15  -1.0 0.00e+00    -  0.00e+00 0.00e+00   0
   1  2.9825755e+01 1.39e+00 1.73e+03  -1.0 3.69e+04    -  3.97e-01 9.90e-01h  1
   2  2.9800115e+01 1.60e+00 2.39e+03  -1.0 1.37e+03    -  9.37e-01 9.90e-01h  1
   3  2.9653330e+01 3.23e-01 2.53e+04  -1.0 1.66e+03    -  7.35e-01 9.90e-01h  1
   4  2.9386392e+01 2.02e-02 5.65e+04  -1.0 1.47e+03    -  9.89e-01 1.00e+00h  1
   5  2.9283226e+01 2.13e-04 1.04e+05  -1.0 1.66e+03    -  9.89e-01 1.00e+00f  1
   6  2.9283598e+01 2.79e-08 1.04e+03  -1.0 2.19e+01    -  9.90e-01 1.00e+00h  1
   7  2.9282885e+01 3.35e-07 2.61e+04  -2.5 1.24e+02    -  9.97e-01 1.00e+00f  1
   8  2.9282886e+01 1.73e-12 4.97e-08  -2.5 2.39e-01    -  1.00e+00 1.00e+00h  1
   9  2.9282886e+01 2.87e-10 3.05e+00  -8.6 3.61e+00    -  1.00e+00 1.00e+00h  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
  10  2.9282886e+01 2.88e-12 4.97e-12  -8.6 2.03e-04    -  1.00e+00 1.00e+00h  1

Number of Iterations....: 10

                                   (scaled)                 (unscaled)
Objective...............:   2.9282885686263434e+01    2.9282885686263434e+01
Dual infeasibility......:   4.9664128054944766e-12    4.9664128054944766e-12
Constraint violation....:   2.8776980798284058e-12    2.8776980798284058e-12
Complementarity.........:   2.5059037694316837e-09    2.5059037694316837e-09
Overall NLP error.......:   2.5059037694316837e-09    2.5059037694316837e-09


Number of objective function evaluations             = 11
Number of objective gradient evaluations             = 11
Number of equality constraint evaluations            = 11
Number of inequality constraint evaluations          = 0
Number of equality constraint Jacobian evaluations   = 11
Number of inequality constraint Jacobian evaluations = 0
Number of Lagrangian Hessian evaluations             = 10
Total CPU secs in IPOPT (w/o function evaluations)   =      0.010
Total CPU secs in NLP function evaluations           =      0.049

EXIT: Optimal Solution Found.
</pre>
</div>
</div>
<div class="section" id="display-results">
<h2>5.0 Display results<a class="headerlink" href="#display-results" title="Permalink to this headline">¶</a></h2>
<p>Let us display the results by running the next cell.</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The SSE at the optimal solution is </span><span class="si">%0.6f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">obj_value</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The values for the parameters are as follows:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">parameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="n">SSE</span> <span class="n">at</span> <span class="n">the</span> <span class="n">optimal</span> <span class="n">solution</span> <span class="ow">is</span> <span class="mf">29.282886</span>

<span class="n">The</span> <span class="n">values</span> <span class="k">for</span> <span class="n">the</span> <span class="n">parameters</span> <span class="n">are</span> <span class="k">as</span> <span class="n">follows</span><span class="p">:</span>
<span class="n">fs</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">PR_kappa</span><span class="p">[</span><span class="n">bmimPF6</span><span class="p">,</span><span class="n">carbon_dioxide</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.40714251766508386</span>
<span class="n">fs</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">PR_kappa</span><span class="p">[</span><span class="n">carbon_dioxide</span><span class="p">,</span><span class="n">bmimPF6</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.020593691531709476</span>
</pre></div>
</div>
<p>Now we can use this parameters and include them in the configuration
dictionary. We can also use
<code class="docutils literal notranslate"><span class="pre">m.fs.properties</span> <span class="pre">=</span> <span class="pre">GenericParameterBlock(default=configuration)</span></code> to
solve unit models.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright DOE Institute for the Design of Advanced Energy Systems (IDAES), 2018-2020.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
<div id="bottombanner">
    The IDAES team:
    <ul>
        <li>National Energy Technology Laboratory (Lead)</li>
        <li>Sandia National Laboratory</li>
        <li>Lawrence Berkeley National Laboratory</li>
        <li>Carnegie-Mellon University (subcontract to LBNL)</li>
        <li>West Virginia University (subcontract to LBNL)</li>
    </ul>
    <div id="contactinfo">
        General, background and overview information<br/> is available at the
        <a href="https://www.idaes.org>">IDAES main website</a>
    </div>
</div>


</body>
</html>